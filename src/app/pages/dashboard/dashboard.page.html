<app-header
  [title]="'Gastowntest'"
  [userName]="userName()"
  [isAuthenticated]="isAuthenticated()"
  (loginClicked)="onLoginClick()"
  (logoutClicked)="onLogoutClick()"
></app-header>

<main class="dashboard-page">
  <div class="container">
    <div class="page-header">
      <h1>Dashboard</h1>
      <p class="subtitle">Welcome back, {{ userName() }}!</p>
    </div>

    @if (isAuthenticated()) {
      <div class="dashboard-content">
        <section class="user-info-section">
          <h2>User Information</h2>
          <div class="info-card">
            <div class="info-item">
              <span class="label">Name:</span>
              <span class="value">{{ currentUser()?.name }}</span>
            </div>
            <div class="info-item">
              <span class="label">Email:</span>
              <span class="value">{{ currentUser()?.email }}</span>
            </div>
            <div class="info-item">
              <span class="label">User ID:</span>
              <span class="value">{{ currentUser()?.id }}</span>
            </div>
          </div>
        </section>

        <section class="stats-section">
          <div class="section-header">
            <h2>Statistics</h2>
            <app-button
              [label]="'Refresh'"
              [variant]="'primary'"
              (clicked)="onRefreshStats()"
            ></app-button>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ‘ï¸</div>
              <div class="stat-value">{{ stats().views | number }}</div>
              <div class="stat-label">Total Views</div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">ğŸ‘†</div>
              <div class="stat-value">{{ stats().clicks | number }}</div>
              <div class="stat-label">Total Clicks</div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">âœ…</div>
              <div class="stat-value">{{ stats().conversions | number }}</div>
              <div class="stat-label">Conversions</div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">ğŸ“Š</div>
              <div class="stat-value">{{ conversionRate() }}%</div>
              <div class="stat-label">Conversion Rate</div>
            </div>
          </div>

          <div class="last-updated">
            Last updated: {{ lastUpdated() | date:'medium' }}
          </div>
        </section>
      </div>
    } @else {
      <div class="not-authenticated">
        <h2>Please Log In</h2>
        <p>You need to be logged in to view your dashboard.</p>
        <app-button
          [label]="'Login'"
          [variant]="'primary'"
          [loading]="isLoading()"
          (clicked)="onLoginClick()"
        ></app-button>
      </div>
    }
  </div>
</main>
